# ADR 002 — EventBridge + API Destination para Eventos S3

| Campo      | Valor                |
|------------|----------------------|
| Status     | Aceito               |
| Data       | 2026-01-16           |
| Autor      | Arão Freitas         |

## Contexto

Cada parte enviada gera evento PartUploaded; finalização gera evento CompleteMultipartUpload. Lambda adiciona cold starts e custo por execução.

## Decisão

Encaminhar eventos via EventBridge → API Destination.

## Consequências

### Positivas

- Sem cold starts, menor latência (20–50ms médio).
- Retry e DLQ gerenciados nativamente.
- Redução de custos (~99% economia vs Lambda).
- Upload paralelo, retries por parte, segurança (URLs expiradas)

### Negativas

- Requer endpoint HTTP público ou VPC Link para receber eventos
- Menor flexibilidade de transformação comparado a Lambda

## Alternativas Consideradas

1. **Lambda como handler**: Descartado por cold starts e custo por execução (~$0.20/1M invocações + tempo de execução)
2. **SQS + Consumer**: Descartado por complexidade adicional de gerenciamento de filas

## Referências

- [Amazon EventBridge API Destinations](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-api-destinations.html)
- [EventBridge Event Patterns](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-event-patterns.html)