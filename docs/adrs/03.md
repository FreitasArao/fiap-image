# ADR 003 — Banco Wide-Column: Cassandra em vez de ScyllaDB

| Campo      | Valor                |
|------------|----------------------|
| Status     | Aceito               |
| Data       | 2026-01-16           |
| Autor      | Arão Freitas         |


## Contexto

ScyllaDB oferece alta performance e baixa latência, mas custo de operação é elevado para uma startup. Cassandra é robusto, custo menor, compatível com CQL.

## Decisão

Usar Cassandra (wide-column) para balancear custo, escalabilidade e simplicidade operacional.

## Consequências

### Positivas

- Compatibilidade CQL mantém drivers existentes
- Menor custo operacional inicial, adequado a orçamento de startup
- Ecossistema maduro com ampla documentação e suporte da comunidade
- Pipeline assíncrono tolera latência p99 de ~10–50ms

#### Flexibilidade futura:

- Query-first design permite troca de implementação wide-column sem alterar modelo de dados.

- Drivers CQL padrão mantêm portabilidade de queries e repositórios.

- Camada de persistência abstrata (repositórios) desacopla aplicação do banco específico.

- Configuração de cluster modular facilita adicionar/remover nós ou migrar para ScyllaDB posteriormente.

### Negativas

- Latência p99 maior comparado a ScyllaDB (~10–50ms vs ~1–5ms)
- Throughput por nó menor; mais nós podem ser necessários sob carga alta
- Risco de GC(Garbage collecto)
- Menor eficiência de CPU (JVM vs C++)

## Alternativas Consideradas

1. **ScyllaDB**: Descartado por custo operacional elevado para fase inicial de startup
2. **DynamoDB**: Descartado por custo variável em alta escala
3. **MongoDB**: Descartado por não ser otimizado para alta escrita

## Referências

- [Apache Cassandra Documentation](https://cassandra.apache.org/doc/latest/)
- [Cassandra vs ScyllaDB Comparison](https://www.scylladb.com/scylladb-vs-cassandra/)
